FROM mysql:8.0.0

MAINTAINER FrankUnderwood <frankunderw00d123123412345@gmail.com>

ENV WORK_PATH /mysql
ENV AUTO_RUN_DIR /docker-entrypoint-initdb.d
ENV FILE_PRIVILEGE privilege.sql
ENV FILE_DATABASES databases.sql
ENV FILE_TABLES tables.sql
ENV RUN_SHELL run.sh
ENV FILE_DB_Conf my.cnf
ENV MYSQL_ROOT_PASSWORD=123456
ENV TZ=Asia/Shanghai

RUN mkdir -p $WORK_PATH/conf $WORK_PATH/data $WORK_PATH/log
RUN chmod 777 $WORK_PATH/log

COPY ./$FILE_DB_Conf $WORK_PATH/conf
COPY ./$FILE_PRIVILEGE $WORK_PATH
COPY ./$FILE_DATABASES $WORK_PATH
COPY ./$FILE_TABLES $WORK_PATH
COPY ./$RUN_SHELL $AUTO_RUN_DIR

RUN chmod a+x $AUTO_RUN_DIR/$RUN_SHELL